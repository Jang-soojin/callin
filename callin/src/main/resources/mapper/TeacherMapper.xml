<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="callinedu.callin.mapper.TeacherMapper">
	<resultMap type="Teacher" id="teacherResultMap">
		<result property="teacherId" 		column="teacher_id"/>
		<result property="teacherName" 		column="teacher_name"/>
		<result property="contractType" 	column="contract_type"/>
		<result property="hourlyRate" 		column="hourly_rate"/>
	</resultMap>
	
	<resultMap type="TeacherAttendance" id="teacherAttendanceResultMap">
		<result property="attendanceCode" 	column="attendance_code"/>
		<result property="teacherId" 		column="teacher_id"/>
		<result property="teacherWorkHour" 	column="teacher_work_hour"/>
		<result property="workDate" 		column="work_date"/>
	</resultMap>
	
	<select id="getTeacherList" resultMap="teacherResultMap">
		SELECT
			 teacher_id
			,teacher_name
			,contract_type
			,hourly_rate
		FROM
			tb_teacher
	</select>
	
	<select id="getTeacherInfoById" resultMap="teacherResultMap" parameterType="String">
		SELECT
			teacher_id
			,teacher_name
			,contract_type
			,hourly_rate
		FROM
			tb_teacher
		<trim prefix="WHERE" prefixOverrides="AND |OR ">
			teacher_id=#{teacherId}
		</trim>		
	</select>
	
	<select id="getTotalWorkHour"  resultType="int" parameterType="String">
		SELECT 
			COALESCE(SUM(teacher_work_hour),0)
		FROM 
			teacher_attendance 
		WHERE 
			teacher_id = #{teacherId} AND
			work_date BETWEEN DATE(#{dateRange1}) AND DATE(#{dateRange2})
		
	</select>
	
	
</mapper>